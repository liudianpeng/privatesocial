{% extends "SlackissSocialBundle:layout:layout.html.twig" %}

{% block title %}时间线{% endblock %}

{% block header %}
{{parent()}}
<style>
.timeline-content textarea{
    padding:10px;
    font-size:120%;
    font-weight:bold;
    color:#696969;
    overflow: auto;
    height:46px;
}
</style>
{% endblock %}

{% block content %}

<div class="row">
<div class="col-sm-9">
  <div class="row">
    {{form_start(form)}}
    <div class="col-sm-10 timeline-content">
      {{form_widget(form.content)}}
    </div>
    <div class="col-sm-2">
      <input type="submit" name="submit" value="发布" class="btn btn-lg btn-default" />
    </div>
    {{form_end(form)}}
  </div>
  <div class="timeline">
    {% for entity in entities %}
    <div class="media" style="margin-top:20px">
      <a class="pull-left" href="#">
        <img class="media-object" src="..." alt="...">
      </a>
      <div class="media-body">
        <h4 class="hide media-heading"></h4>
        {% if entity.picture %}
        <img src="{{path('social_picture_show',{id:entity.picture.id})}}" class="thumbnail img-responsive" />
        {% endif %}
        {{entity.content|default('')|nl2br}}
      </div>
    </div>
    {% endfor %}
  </div>
  {{knp_pagination_render(entities)}}
</div>

<div class="col-sm-3">
  {% if app.user and app.user.memberProfile and app.user.memberProfile.avatar %}
  <img src="{{vich_uploader_asset(app.user.memberProfile,"avatarAttach")|imagine_filter('avatar_large_image')}}"
       title="{{app.user.name}}" class="thumbnail img-responsive"/>
  {% else %}
  <a href="{{path('profile_edit')}}">请上传头像</a>
  {% endif %}

  {% if app.user and app.user.memberProfile and app.user.memberProfile.description %}
  <div class="well">
    {{app.user.memberProfile.description|nl2br}}
  </div>
  {% endif %}


  <div style="margin-top:100px;margin-bottom:20px;">
    {{context.announcement|raw}}
  </div>
</div>

</div>
{% endblock %}
